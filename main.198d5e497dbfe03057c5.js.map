{"version":3,"sources":["webpack:///./templates/search-form.hbs","webpack:///./Components/apiService.js","webpack:///./index.js","webpack:///./templates/image-card.hbs","webpack:///./templates/gallery.hbs"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","myPixabayAPIKey","getImagesAsync","search","page","per_page","fetch","then","resp","ok","json","Promise","reject","status","catch","err","console","warn","log","_","require","tmpltSearchForm","tmpltGallery","tmpltImageCard","dir","rootRef","document","querySelector","searchFormRef","galleryRef","loadMoreRef","scrollPointerID","scrollPointerRef","createElement","id","loadMorePointerRef","pageCounter","searchRequest","updateGalleryMarkup","imageCardMarkup","galleryMarkup","imageCards","insertAdjacentHTML","observer","IntersectionObserver","entries","some","entry","intersectionRatio","getElementById","remove","appendChild","hndlSearchInputDebounced","debounce","event","target","value","textContent","addEventListener","scrollIntoView","block","behavior","observe","helper","alias1","lambda","alias2","escapeExpression","alias3","nullContext","alias4","hooks","helperMissing","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.198d5e497dbfe03057c5.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<!-- Шаблон формы поиска изображений -->\\n<form class=\\\"search-form\\\" id=\\\"search-form\\\">\\n  <input\\n    type=\\\"text\\\"\\n    name=\\\"query\\\"\\n    autocomplete=\\\"off\\\"\\n    placeholder=\\\"Search images...\\\"\\n  />\\n</form>\";\n},\"useData\":true});","const myPixabayAPIKey = '20359812-1a8cb06279a89fe4a16bcb413';\n\nasync function getDataAsync(search){\n  try {\n     return await fetch(`https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${search}&page=1&per_page=12&key=${myPixabayAPIKey}`)\n      .then(resp=>(resp.ok)\n      ?resp.json()\n      :Promise.reject('not found '+ resp.status))\n      .catch((err)=>{console.warn(err)});\n    } catch (err) {\n        console.log(\"Error catched......\");\n      throw err;\n    }\n}\n// webformatURL - ссылка на маленькое изображение для списка карточек\n// largeImageURL - ссылка на большое изображение (смотри пункт 'дополнительно')\n// likes - количество лайков\n// views - количество просмотров\n// comments - количество комментариев\n// downloads - количество загрузок\nexport async function getImagesAsync(search, page=1, per_page=12){\n    try {\n       return await fetch(`https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${search}&page=${page}&per_page=${per_page}&key=${myPixabayAPIKey}`)\n        .then(resp=>(resp.ok)\n        ?resp.json()\n        :Promise.reject('not found '+ resp.status))\n        .catch((err)=>{console.warn(err)})\n\n      } catch (err) {\n          console.log(\"Error catched......\");\n        throw err;\n      }\n}\n","import './styles.css';\n\n// import libraries\nconst _ = require('lodash');\n\n// import templates\nconst tmpltSearchForm = require('./templates/search-form.hbs');\nconst tmpltGallery = require('./templates/gallery.hbs');\nconst tmpltImageCard = require('./templates/image-card.hbs');\nimport { getImagesAsync } from './Components/apiService.js';\n// import { createHtmlTagObject } from 'html-webpack-plugin';\nconsole.dir(tmpltSearchForm({}));\nconsole.dir(tmpltGallery({}));\nconsole.dir(tmpltImageCard({}));\n\n// webformatURL - ссылка на маленькое изображение для списка карточек\n// largeImageURL - ссылка на большое изображение (смотри пункт 'дополнительно')\n// likes - количество лайков\n// views - количество просмотров\n// comments - количество комментариев\n// downloads - количество загрузок\n\nconst rootRef = document.querySelector('body');\nconsole.log(rootRef);\nconst searchFormRef = rootRef.querySelector('#search-form');\nconsole.log(searchFormRef);\nconst galleryRef = rootRef.querySelector('.gallery');\nconsole.log(galleryRef);\nconst loadMoreRef = rootRef.querySelector('#load-more');\nconsole.log(loadMoreRef);\n\n// scrolling helpers>>>>>>>>>>>>>>>>>>\n// for endless scroll:\nconst scrollPointerID = 'endless-scroll-pointer' ;\nconst scrollPointerRef = document.createElement(\"div\");\nscrollPointerRef.id = scrollPointerID;\n// for loadMore \nconst loadMorePointerID = 'load-more-pointer' ;\nconst loadMorePointerRef = document.createElement('div');\nloadMorePointerRef.id = loadMorePointerID;\n\nlet pageCounter = 1;\nlet searchRequest = '';\n\n\nfunction hndlSearchInput(event) {\n    pageCounter = 1;\n    searchRequest = event.target.value;\n\n  getImagesAsync(searchRequest, pageCounter).then(resp => {\n    console.log(resp);\n    // const galleryID = 'gallery-1';\n\n    if(document.getElementById(scrollPointerID)!=null){document.getElementById(scrollPointerID).remove()}\n    if(document.getElementById(loadMorePointerID)!=null){document.getElementById(loadMorePointerID).remove()}\n\n    const imageCardMarkup = tmpltImageCard(resp);\n    // console.dir(imageCardMarkup);\n\n    const galleryMarkup = tmpltGallery({imageCards: imageCardMarkup});\n    // console.log(galleryMarkup);\n    if(galleryRef.textContent!==''){\n        galleryRef.textContent='';\n        // console.warn(galleryRef);\n    }\n    galleryRef.insertAdjacentHTML('beforeend',galleryMarkup);\n    galleryRef.appendChild(scrollPointerRef);\n\n    // return resp;\n  });\n}\nfunction updateGalleryMarkup(data){\n  const imageCardMarkup = tmpltImageCard(data);\n  const galleryMarkup = tmpltGallery({imageCards: imageCardMarkup});\n  galleryRef.insertAdjacentHTML('beforeend',galleryMarkup);\n}\n\nfunction hndlLoadMore(event, per_page=12){\n    pageCounter += 1;\n    getImagesAsync(searchRequest, pageCounter, per_page).then(resp => {\n        console.log(resp);    \n\n        if(document.getElementById(scrollPointerID)!=null){document.getElementById(scrollPointerID).remove()};\n        if(document.getElementById(loadMorePointerID)!=null){document.getElementById(loadMorePointerID).remove()};\n\n      // add loadMorePointer>>>>>>>\n        galleryRef.appendChild(loadMorePointerRef);\n        \n      //  insert markup >>>>>>>>>>>>\n        updateGalleryMarkup(resp);\n        \n        // scroll to loadMorePointer >>>>>>>>>>>>\n        loadMorePointerRef.scrollIntoView({block: \"start\", behavior: \"smooth\"});\n\n      // add scrollPointer for intersectObserver >>>>>>>\n        galleryRef.appendChild(scrollPointerRef);\n    \n      return resp;\n      });\n    \n}\nfunction hndlEndlessScroll(event, per_page=12){\n  pageCounter += 1;\n  getImagesAsync(searchRequest, pageCounter, per_page).then(resp => {\n    console.log(resp);    \n\n    if(document.getElementById(scrollPointerID)!=null){document.getElementById(scrollPointerID).remove()};\n  \n  //  insert markup >>>>>>>>>>>>\n    updateGalleryMarkup(resp);\n\n  // add scrollPointer for intersectObserver >>>>>>>\n    galleryRef.appendChild(scrollPointerRef);\n\n  return resp;\n  });\n}\n\nconst observer = new IntersectionObserver(entries=>{\n    if(!entries.some(entry=>entry.intersectionRatio>0)){\n        return;\n    }\n    hndlEndlessScroll();\n\n})\n\nconst timeDebounce = 500; // ms to wait after input puse\nconst hndlSearchInputDebounced = _.debounce(hndlSearchInput, timeDebounce);\n\nsearchFormRef.addEventListener('input', hndlSearchInputDebounced);\nloadMoreRef.addEventListener('click', hndlLoadMore);\nobserver.observe(scrollPointerRef);\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), alias4=container.hooks.helperMissing, alias5=\"function\", lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery-item\\\">\\n  <div class=\\\"photo-card\\\">\\n    <img class=\\\"card-image\\\" src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"#\\\" />\\n    <div class=\\\"stats\\\">\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">\\n          thumb_up\\n        </i>\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">\\n          visibility\\n        </i>\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">\\n          comment\\n        </i>\\n        \"\n    + alias2(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias4),(typeof helper === alias5 ? helper.call(alias3,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":8},\"end\":{\"line\":24,\"column\":20}}}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">\\n          cloud_download\\n        </i>\\n        \"\n    + alias2(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias4),(typeof helper === alias5 ? helper.call(alias3,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":30,\"column\":8},\"end\":{\"line\":30,\"column\":21}}}) : helper)))\n    + \"\\n      </p>\\n    </div>\\n  </div>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<!-- Шаблон элемента галереи изображений -->\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hits\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":0},\"end\":{\"line\":35,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<!-- Шаблон галереи изображений -->\\n\\n  <!-- Список <li> с карточками изображений -->\\n\\n  \"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"imageCards\") || (depth0 != null ? lookupProperty(depth0,\"imageCards\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"imageCards\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":2},\"end\":{\"line\":5,\"column\":18}}}) : helper))) != null ? stack1 : \"\")\n    + \"\\n \";\n},\"useData\":true});"],"sourceRoot":""}